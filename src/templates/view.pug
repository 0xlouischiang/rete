// Groups
div.group(al-repeat='group in editor.groups',
  :style.transform='"translate("+group.position[0]+"px,"+group.position[1]+"px)"',
  :style.width='group.width+"px"',
  :style.height='group.height+"px"',
  :class.selected='editor.selected.contains(group)'
  )&attributes({'group-dir!':''})
  div.group-title&attributes({'group-title!':''})
    | {{group.title}}
  div.group-handler.right.bottom&attributes({'group-handler!':"this, $element, 'rb', $env"})
  div.group-handler.left.top&attributes({'group-handler!':"this, $element, 'lt', $env"})
  div.group-handler.left.bottom&attributes({'group-handler!':"this, $element, 'lb', $env"})
  div.group-handler.right.top&attributes({'group-handler!':"this, $element, 'rt', $env"})

// Connections
svg.connections
  path.connection(
    al-repeat='path in editor.paths',
    :d='path.d'
    :data-input-node="path.input?path.input.node.id:null"
    :data-input-index="path.input?path.input.node.inputs.indexOf(path.input):null"
    :data-output-node="path.output?path.output.node.id:null"
    :data-output-index="path.output?path.output.node.outputs.indexOf(path.output):null"
    :class.selected='path.selected'
  )

// Nodes
div.node(al-repeat='node in editor.nodes',
  :style.transform='"translate("+node.position[0]+"px,"+node.position[1]+"px)"',
  class="{{editor.selected.contains(node)?'selected':''}} {{node.title.toLowerCase().replace('/\ /g','-')}}"
  )&attributes({'node-dir!':''})
  div(al-html="editor.view.getTemplate(node)")