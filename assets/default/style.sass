$node-color: rgba(110,136,255,0.8)
$node-color-selected: #ffd92c
$context-color: $node-color
$group-color: rgba(15,80,255,0.2)
$group-handler-size: 40px
$group-handler-offset: -10px
$socket-size: 24px
$socket-margin: 6px
$node-width: 180px
$context-menu-round: 7px

.node-editor
  overflow: hidden
  background: transparent
  *
    box-sizing: border-box
  .node
    background: $node-color
    border: 2px solid #4e58bf
    border-radius: 10px
    cursor: pointer
    width: $node-width
    height: auto
    padding-bottom: 6px
    box-sizing: content-box
    position: absolute
    &:hover
      background: lighten($node-color,4%)
    &.selected
      background: $node-color-selected
      border-color: #e3c000
    .title
      color: white
      font-family: sans-serif
      font-size: 18px
      padding: 8px
    .socket
      display: inline-block
      cursor: pointer
      border: 1px solid white
      border-radius: $socket-size/2.0
      width: $socket-size
      height: $socket-size
      margin: $socket-margin
      vertical-align: middle
      z-index: 2
      &:hover
        border-width: 4px
      &.multiple
        border-color: yellow
      &.output
        margin-right: - $socket-size / 2
      &.input
        margin-left: - $socket-size / 2
    .input-title,.output-title
      vertical-align: middle
      color: white
      display: inline-block
      font-family: sans-serif
      font-size: 14px
      margin: $socket-margin
      line-height: $socket-size
    .input-control
      z-index: 1
      width: $node-width - $socket-size - 2*$socket-margin
      vertical-align: middle
      display: inline-block
    .control
      padding: $socket-margin $socket-size/2 + $socket-margin

  .group
    border-radius: 16px
    background: $group-color
    cursor: pointer
    width: inherit
    height: inherit
    border: 6px solid transparent
    position: absolute
    &.selected
      border-color: #ffd92c
    .group-title
      color: white
      font-family: sans-serif
      font-size: 18px
      padding: 12px
    .group-handler
      background: transparent
      width: $group-handler-size
      height: $group-handler-size
      position: absolute
      =handler($w,$h,$direction)
        &.#{$w}.#{$h}
          cursor: #{$direction}-resize
          #{$w}: $group-handler-offset
          #{$h}: $group-handler-offset
      +handler(right,bottom,se)
      +handler(left,top,nw)
      +handler(right,top,ne)
      +handler(left,bottom,sw)
  .connections
    position: absolute
    overflow: visible
    pointer-events: none
    .connection
      fill: none
      stroke: steelblue
      stroke-width: 5px
      pointer-events: none
      &.selected
        stroke: powderblue  

  select, input
    width: 100%
    border-radius: 30px
    background-color: white
    padding: 2px 6px
    border: 1px solid #999
    font-size: 110%
  

.context-menu
  left: 0
  top: 0
  position: absolute
  padding: 10px
  margin-top: -20px
  & > .item
    margin-left: -80%
    padding-right: 16px
    .subitems
      position: absolute
      display: none
      left: 100%
      top: 0
      border-radius: $context-menu-round
      overflow: overlay
    &:hover .subitems
      display: block
    &.have-subitems:after
      content: 'â–º'
      position: absolute
      opacity: 0.6
      right: 5px
      top: 5px
  .search
    input    
      color: white
      padding: 1px 8px
      border: 1px solid white
      border-radius: 10px
      font-size: 16px
      font-family: serif
      width: 100%
      box-sizing: border-box
      background: transparent
  .item
    padding: 4px
    border-bottom: 1px solid darken($context-color,8%)
    color: #fff
    background-color: $context-color
    cursor: pointer
    width: 100px
    position: relative
    &:first-child
      border-top-left-radius: $context-menu-round
      border-top-right-radius: $context-menu-round
    &:last-child
      border-bottom-left-radius: $context-menu-round
      border-bottom-right-radius: $context-menu-round
    &:hover
      background-color: lighten($context-color,4%)
      
